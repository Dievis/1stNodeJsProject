extends layout

block content
  .container.mt-5
    h1.text-center.mb-5.text-primary.fw-bold Giỏ hàng của bạn

    if cartItems.length > 0
      .row.g-4
        each item in cartItems
          .col-md-6.col-lg-4
            .card.shadow-sm.h-100
              img.card-img-top(src=item.product.imgURL, alt=item.product.name, style="height: 250px; object-fit: cover;")
              .card-body.d-flex.flex-column.justify-content-between
                .mb-2
                  h5.card-title.text-truncate(style="max-width: 100%")= item.product.name
                  p.card-text.mb-1 Giá: 
                    span.text-danger.fw-bold #{item.product.price.toLocaleString()} VND
                  p.card-text.mb-1 Số lượng: 
                    span.fw-medium= item.quantity
                  p.card-text Tổng: 
                    span.text-success.fw-bold #{(item.product.price * item.quantity * (1 - (item.product.discount || 0) / 100)).toFixed(2).toLocaleString()} VND
                form.mt-3(method="POST", action=`/carts/remove/${item.product._id}`)
                  button.btn.btn-outline-danger.btn-sm.w-100(type="submit")
                    i.fas.fa-trash-alt.me-2
                    | Xóa khỏi giỏ hàng

      .cart-summary.mt-5.p-4.bg-light.rounded.shadow-sm
        h3.text-end Tổng giá trị giỏ hàng: 
          span.text-success.fw-bold #{totalPrice.toFixed(2).toLocaleString()} VND
        form.text-end.mt-3(method="POST", action="/checkout")
          button.btn.btn-success.btn-lg(type="submit")
            i.fas.fa-credit-card.me-2
            | Thanh toán
    else
      p.text-center.mt-4.text-muted Không có sản phẩm nào trong giỏ hàng.

block styles
  style.
    body {
      background-color: #f8f9fa;
    }

    .card-title {
      font-size: 1.1rem;
    }

    .card-text {
      font-size: 0.95rem;
    }

    .cart-summary h3 {
      font-size: 1.5rem;
    }
